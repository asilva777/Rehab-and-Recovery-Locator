<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rehab & Recovery Locator – Philippines</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    h1 {
      text-align: center;
      background: #2d5a9b;
      color: white;
      padding: 15px;
    }
    #map {
      height: 80vh;
      width: 100%;
    }
    .search-boxes {
      display: flex;
      justify-content: center;
      padding: 10px;
      gap: 10px;
      flex-wrap: wrap;
    }
    input {
      padding: 8px;
      width: 200px;
    }
  </style>
</head>
<body>

  <h1>Rehab & Recovery Locator – Philippines</h1>

  <div class="search-boxes">
    <input type="text" id="regionInput" placeholder="Search by Region" />
    <input type="text" id="provinceInput" placeholder="Search by Province" />
    <input type="text" id="cityInput" placeholder="Search by City" />
  </div>

  <div id="map"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <script>
    const rehabCenters = [
      {
        region: "Cagayan Valley",
        province: "Isabela",
        city: "Ilagan City",
        name: "DOH Drug Abuse Treatment & Rehabilitation Center",
        address: "Centro, Brgy. San Antonio, Ilagan",
        director: "Dr. Charity I. Canapi",
        capacity: "50 (Male)",
        ownership: "GO",
        modality: "Therapeutic Community",
        contact: "0908-8134084 / 0975-2762650 / 0917-1528202",
        email: "trc_dohro2@yahoo.com.ph",
        validity: "01/01/2020 - 12/31/2022",
        lat: 17.1473,
        lng: 121.8892
      },
      {
        region: "Central Luzon",
        province: "Bataan",
        city: "Pilar",
        name: "DOH-Treatment and Rehabilitation Center Bataan",
        address: "Batangas III, Brgy. Liyang, Pilar",
        director: "Dr. Elizabeth Serrano",
        capacity: "200 (Male & Female)",
        ownership: "GO",
        modality: "Therapeutic Community",
        contact: "0999-5190930",
        email: "dohtrcbataan@yahoo.com",
        validity: "01/01/2022 - 12/31/2024",
        lat: 14.6725,
        lng: 120.5361
      }
      region: "Central Luzon",
        province: "Nueva Ecija",
        city: "Palayan City",
        name: "DOH-Treatment and Rehabilitation Center Bataan",
        address: "Batangas III, Brgy. Liyang, Pilar",
        director: "Dr. Elizabeth Serrano",
        capacity: "200 (Male & Female)",
        ownership: "GO",
        modality: "Therapeutic Community",
        contact: "0999-5190930",
        email: "dohtrcbataan@yahoo.com",
        validity: "01/01/2022 - 12/31/2024",
        lat: 14.6725,
        lng: 120.5361

4 Calabarzon Cavite
Trece
Martires
City
5 Calabarzon Laguna
Santa Rosa
City
6 Calabarzon Laguna Camarines
Sur
8 Bicol Albay Batangas III, Brgy. Liyang, Pilar,
Bataan
DOH-TREATMENT AND
REHABILITATION CENTER
BATAAN
Dr. Elizabeth Serrano
Chief of Hospital II
200 (male
& female) GO Residential FS
Therapeutic
Community 0999-5190930
dohtrcbataan@yahoo.com
(01/01/2022 -
12/31/2024)

    

    ];

    const map = L.map('map').setView([12.8797, 121.7740], 6);

    // Tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    let markers = [];

    function addMarkers(filteredData) {
      markers.forEach(marker => map.removeLayer(marker));
      markers = [];

      filteredData.forEach(center => {
        const popupContent = `
          <strong>${center.name}</strong><br>
          ${center.address}<br>
          <em>Contact:</em> ${center.contact}<br>
          <em>Email:</em> ${center.email}<br>
          <em>Validity:</em> ${center.validity}
        `;

        const marker = L.marker([center.lat, center.lng])
          .addTo(map)
          .bindPopup(popupContent);
        markers.push(marker);
      });
    }

    function filterAndUpdate() {
      const region = document.getElementById("regionInput").value.toLowerCase();
      const province = document.getElementById("provinceInput").value.toLowerCase();
      const city = document.getElementById("cityInput").value.toLowerCase();

      const filtered = rehabCenters.filter(center =>
        center.region.toLowerCase().includes(region) &&
        center.province.toLowerCase().includes(province) &&
        center.city.toLowerCase().includes(city)
      );

      addMarkers(filtered);
    }

    document.getElementById("regionInput").addEventListener("input", filterAndUpdate);
    document.getElementById("provinceInput").addEventListener("input", filterAndUpdate);
    document.getElementById("cityInput").addEventListener("input", filterAndUpdate);

    addMarkers(rehabCenters);
  </script>
</body>
</html>
